ALTER TABLE `reports` 
CHANGE COLUMN `name` `name` VARCHAR(255) CHARACTER SET 'utf8mb4' NOT NULL ,
ADD UNIQUE INDEX `name_UNIQUE` (`name` ASC) VISIBLE;

INSERT INTO `reports` (`name`,`q`) VALUES ('coIndicator','select \n	sum(km_percorsi.answer*giorni_sede.giorni_sede*2*44*0.7853/1000) as emissioni_co_kg_anno, #44 settimane lavorative/anno consideranto 220 giorni lavorativi/anno\n	sum(km_percorsi.answer*giorni_sede.giorni_sede*2*44*163.0846/1000) as  emissioni_co2_kg_anno,# la constante 163.0846 sono le emissioni di CO2/km\n	sum(km_percorsi.answer*giorni_sede.giorni_sede*2*44*0.4256/1000) as  emissioni_nox_kg_anno,\n	sum(km_percorsi.answer*giorni_sede.giorni_sede*2*44*0.0297/1000) as  emissioni_pm10_kg_anno\n# TAB 1\nfrom (select user_id, answer \nFROM answers\nwhere question_id=3) as km_percorsi,\n# TAB 2 \n(select user_id,\n	CASE\n		WHEN answer = \'\"Sette\"\' THEN 7\n		WHEN answer = \'\"Sei\"\' THEN 6\n		WHEN answer = \'\"Cinque\"\' THEN 5\n		WHEN answer = \'\"Quattro\"\' THEN 4\n		WHEN answer = \'\"Tre\"\' THEN 3\n		WHEN answer = \'\"Due\"\' THEN 2\n		WHEN answer = \'\"Uno\"\' THEN 1\n		ELSE 0\n	END as giorni_sede\nFROM answers\nwhere question_id=194) as  giorni_sede,\n# TAB 3 \n(select answer , user_id\nFROM answers\nwhere question_id=10) as mezzo,\n# TAB 4 \n(select answer , user_id\nFROM answers\nwhere question_id=16) as carburante\n# WHERE\nwhere km_percorsi.user_id = giorni_sede.user_id\nand km_percorsi.user_id = mezzo.user_id\nand km_percorsi.user_id = carburante.user_id\n');
